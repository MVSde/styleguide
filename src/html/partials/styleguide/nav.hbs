<nav class="sg-nav">
  <ul class="sg-nav__list">

  {{#each navItems}}
    <li class="sg-nav__item">

      <button class="sg-nav__button">
        <span class="sg-nav__icon">{{this.icon}}</span>
        <span class="sg-nav__text">{{this.name}}</span>
      </button>

      <ul class="sg-nav__sub-list">
      {{#each this.pages}}
        <li class="sg-nav__sub-item">
          <a href="{{rel}}{{this.url}}" class="sg-nav__link">{{this.name}}</a>
        </li>
      {{/each}}
      </ul>

    </li>
  {{/each}}

    <li class="sg-nav__item">
      <button class="sg-nav__button">
        <span class="sg-nav__icon">S</span>
        <span class="sg-nav__text">Settings</span>
      </button>
      <ul class="sg-nav__sub-list">
        <li class="sg-nav__sub-item">
          <a href="{{rel}}img/icons.html" class="sg-nav__link" target="_blank">Icon Preview</a>
        </li>
        <li class="sg-nav__sub-item">
          <a href="http://localhost:3001" class="sg-nav__link" target="_blank">BrowserSync</a>
        </li>
      </ul>
    </li>

  </ul>

  <button class="sg-nav__hide-btn">
    <svg class="sg-nav__hide-btn-icon sg-nav__hide-btn-icon--close" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    </svg>
    <svg class="sg-nav__hide-btn-icon sg-nav__hide-btn-icon--show" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
    </svg>
  </button>
</nav>


<script>
  function sgGetCookie(name) {
    var value = '; ' + document.cookie;
    var parts = value.split('; ' + name + '=');
    if (parts.length == 2) {
      return parts.pop().split(';').shift()
    };
  }

  var sgNav           = document.querySelector('.sg-nav');
  var sgNavHideBtn    = document.querySelector('.sg-nav__hide-btn');
  var sgNavBtn        = document.querySelectorAll('.sg-nav__button');
  var sgNavSubList    = document.querySelectorAll('.sg-nav__sub-list');
  var sgNavActive     = true;
  var sgNavLastActive = null;

  if (sgGetCookie('sgNavActive') === 'false') {
    sgNavHideBtn.classList.add('sg-nav__hide-btn--active');
    sgNav.classList.add('sg-nav--hidden');

    sgNavActive = false;
  }

  sgNavHideBtn.onclick = function() {
    if (sgNavActive) {
      this.classList.add('sg-nav__hide-btn--active');
      sgNav.classList.add('sg-nav--hidden');

      sgNavActive     = false;
      document.cookie = 'sgNavActive=false';
    } else {
      this.classList.remove('sg-nav__hide-btn--active');
      sgNav.classList.remove('sg-nav--hidden');

      sgNavActive     = true;
      document.cookie = 'sgNavActive=true';
    }

    for (var i = 0; i < sgNavBtn.length; i++) {
      sgNavBtn[i].classList.remove('sg-nav__button--active');
      sgNavSubList[i].classList.remove('sg-nav__sub-list--visible');

      sgNavLastActive = null;
    }
  };

  for (var i = 0; i < sgNavBtn.length; i++) {
    sgNavBtn[i].addEventListener('click', function(event) {
      event.preventDefault();

      for (var i = 0; i < sgNavBtn.length; i++) {
        sgNavBtn[i].classList.remove('sg-nav__button--active');
        sgNavSubList[i].classList.remove('sg-nav__sub-list--visible');
      }

      if (this === sgNavLastActive) {
        this.classList.remove('sg-nav__button--active');
        this.nextElementSibling.classList.remove('sg-nav__sub-list--visible');

        sgNavLastActive = null;
      } else {
        this.classList.add('sg-nav__button--active');
        this.nextElementSibling.classList.add('sg-nav__sub-list--visible');

        sgNavLastActive = this;
      }
    });
  }
</script>
